[all:vars]
ansible_connection=ssh
ansible_user=${admin_username}
ansible_ssh_private_key_file=${private_key_filename}

%{ if workload_variables != "" ~}
[${scenario}:vars]
%{ for key, value in workload_variables ~}
${key}=${value}
%{ endfor ~}
%{ endif ~}

[custom:children]
%{ if custom_profile != "" ~}
scenario_${custom_profile}
%{endif ~}
${scenario}
profile

[profile:children]
sut
%{ if hammerdb_ip_address != "" ~}
load_generator
%{ endif ~}
localhost

[${scenario}:children]
sut
%{ if hammerdb_ip_address != "" ~}
load_generator
%{ endif ~}
localhost

%{ if custom_profile != "" ~}
[scenario_${custom_profile}:children]
sut
%{ if hammerdb_ip_address != "" ~}
load_generator
%{ endif ~}
localhost
%{ endif ~}
%{ if database_ip_address != "" ~}
[sut]
vm-database ansible_host=${database_ip_address} %{ if vm_db.vm_info.vm_family == "windows" ~}ansible_shell_type=powershell %{ endif ~}
%{ endif ~}

%{ if hammerdb_ip_address != "" ~}
[load_generator]
vm-hammerdb ansible_host=${hammerdb_ip_address} %{ if vm_stresser.vm_info.vm_family == "windows" ~}ansible_shell_type=powershell %{ endif ~}
%{ endif ~}

[localhost]
localhost ansible_host=localhost ansible_connection=local
